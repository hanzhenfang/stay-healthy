# Vue3 如何实现 JS 原生拖拽效果

**前言**: 关于“拖拽”，其实是一个老生常谈的需求了，并且还是一个非常经典的面试题。之前在项目中拖拽的场景都是直接使用轮子，虽然很快就能完成设计需求，但是这个的原理一直都是我十分想去深入了解的一部分。</br>

正好在今天的项目中再一次碰到了这个需求，我觉得是时候去探索一下它了。</br>

**tips**: 本文不会使用 **Dragble事件** 去实现，而是会采用原生的 **JS** 鼠标移动，鼠标点击等事件去完成。

我们先看一下预览效果

![图 4](https://cdn.jsdelivr.net/gh/hanzhenfang/vite-vue-ts@master/%E6%8B%96%E6%8B%BD/IMG_20230221-194439604.gif)

## 一. 前期准备

1. 这个需求实现要准备的文件很少，你只需要创建一个 `.vue` 文件即可快速开始接下来的实现。

2. 在这里我们简化一下，我们暂时去掉不重要的 `hover` 动画的影响。</br>
   ![图 6](https://cdn.jsdelivr.net/gh/hanzhenfang/vite-vue-ts@master/%E6%8B%96%E6%8B%BD/IMG_20230221-195639323.png)

3. 在这里我使用的是 `UnoCSS` ，将样式內联在了标签里，如果你还不了解这种写法，你可以点击下方的文章学习。</br>
   [手把手教你如何创建一个代码仓库](https://juejin.cn/post/7178130338240020539)

4. 我们暂时不牵扯 **Y** 轴上的拖拽效果，你也不必担心，因为它和 **X** 轴上的移动原理是完全一样的。主要目的是为了减少出现大量的属性名导致本文理解起来难度会有些许提升的缘故，还希望读者学习之后可以自行推导出。

## 二. 实现拖拽效果(X轴)

1. 首先用户想要完成**拖拽**这一操作，它的动作里肯定包含了**鼠标按下**的这个动作。（注意：这里不要和 click 事件搞混，拖拽是没有鼠标抬起的动作的。）

2. 那么我们直接先给滑块一个绑定一个 **onMouseDown** 的事件。</br>
   ![图 7](https://cdn.jsdelivr.net/gh/hanzhenfang/vite-vue-ts@master/%E6%8B%96%E6%8B%BD/IMG_20230221-201151984.png)

3. 在这里我们需要用到当前点击传递过来的事件对象身上的一些属性。其实拖拽的关键点就在于如何利用这些属性来动态改变滑块的位置。</br>
   ![图 8](https://cdn.jsdelivr.net/gh/hanzhenfang/vite-vue-ts@master/%E6%8B%96%E6%8B%BD/IMG_20230221-201447190.png)

4. 这里我们选择使用 `clientX` 和
